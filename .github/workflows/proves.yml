name: Proves
on: [push, pull_request]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      
      - name: Set up Java
        uses: actions/setup-java@v4
        with:
          java-version: '17'
          distribution: 'temurin'
          
      - name: Verificar estructura
        run: |
          echo "📁 Estructura del projecte:"
          find . -name '*.java' -type f
          echo "---"
          ls -la
          
      - name: Download JUnit 5 Dependencies
        run: |
          echo "📦 Descarregant JUnit 5..."
          wget -q -O junit-platform-console-standalone.jar https://repo1.maven.org/maven2/org/junit/platform/junit-platform-console-standalone/1.9.2/junit-platform-console-standalone-1.9.2.jar
          
      - name: Compilar i executar tests
        run: |
          echo "🔨 Compilant..."
          find . -name '*.java' > sources.txt
          cat sources.txt
          mkdir -p target/classes
          javac -d target/classes @sources.txt
          echo "🚀 Executant tests..."
          java -jar junit-platform-console-standalone.jar --class-path target/classes --scan-class-path
